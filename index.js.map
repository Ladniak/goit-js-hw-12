{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = (imgInfo) => {\n    return `\n    <li class=\"gallery-card\">\n        <a href=\"${imgInfo.largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\">\n        </a>\n        <div class=\"info-div\">\n            <div class=\"info-one-template\">\n                <p class=\"name\">Likes</p>\n                <p>${imgInfo.likes}</p>\n            </div>\n            <div class=\"info-one-template\">\n                <p class=\"name\">Views</p>\n                <p>${imgInfo.views}</p>\n            </div>\n            <div class=\"info-one-template\">\n                <p class=\"name\">Comments</p>\n                <p>${imgInfo.comments}</p>\n            </div>\n            <div class=\"info-one-template\">\n                <p class=\"name\">Downloads</p>\n                <p>${imgInfo.downloads}</p>\n            </div>\n        </div>\n    </li>\n    `;\n};\n\n","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = async (searchQuery, page) => {\n    \n    const axiosOptions = {\n        params: {\n            key: '45500129-782b0efec7a4b6e4cb35c382f',\n            q: searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n        },\n    };\n    \n    return await axios.get(`/api/`, axiosOptions);\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { createGalleryCard } from \"./js/render-functions\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\n\nconst galleryEl = document.querySelector('.gallery');\nconst formElSearch = document.querySelector('.search-form'); \nconst loadEl = document.querySelector('span');\nconst loadBtn = document.querySelector('.load-btn');\n\n\nlet numOfEl = 0;\nlet currentPage = 1;\nlet searchFromInput = '';\n\nlet gallery = new SimpleLightbox('.gallery a');\ngallery.on('show.simplelightbox', function () { });   \n\nconst onSearchSubmit = async (event) => {\n\n    try {\n        event.preventDefault();\n        loadEl.classList.remove(\"is-hidden\");\n\n        searchFromInput = formElSearch.elements.user_query.value;\n\n        numOfEl = 0;\n        currentPage = 1;\n\n        if (searchFromInput === '') {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            })\n\n            galleryEl.innerHTML = '';\n            formElSearch.reset();\n            loadEl.classList.add(\"is-hidden\");\n            loadBtn.classList.add(\"is-hidden\");\n\n            return;\n        }\n\n        const response = await fetchPhotos(searchFromInput, currentPage);\n\n        if (response.data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            })\n\n            galleryEl.innerHTML = '';\n            formElSearch.reset();\n            loadEl.classList.add(\"is-hidden\");\n            loadBtn.classList.add(\"is-hidden\");\n\n            return;\n        }\n\n        numOfEl += response.data.hits.length;\n        \n        const galleryCardTemplate = response.data.hits.map(imgDetails => createGalleryCard(imgDetails)).join('');\n        \n        galleryEl.innerHTML = galleryCardTemplate;\n\n        gallery.refresh();  \n        \n        loadBtn.classList.remove('is-hidden');\n\n        if (response.data.hits.length < 15) {\n            loadBtn.classList.add(\"is-hidden\");\n        }\n    } catch (error) {\n        iziToast.error({\n                message: error,\n                position: 'topRight',\n            });\n    } finally {\n        loadEl.classList.add(\"is-hidden\");\n    };\n    \n    formElSearch.reset();\n};\n\nconst onBtnClick = async event => {\n    try {\n        currentPage++;\n        loadEl.classList.remove(\"is-hidden\");\n\n        const response = await fetchPhotos(searchFromInput, currentPage);\n        const galleryCardTemplate = response.data.hits.map(imgDetails => createGalleryCard(imgDetails)).join('');\n        galleryEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n\n        numOfEl += response.data.hits.length;\n\n        let gallery = new SimpleLightbox('.gallery a');\n        gallery.refresh();\n        gallery.on('show.simplelightbox', function () { });    \n\n        const galleryCardEl = galleryEl.querySelector('.gallery-card');\n        const cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n        if (numOfEl === response.data.totalHits) {\n            loadBtn.classList.add('is-hidden');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            })\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        loadEl.classList.add(\"is-hidden\");\n    }\n};\n\nformElSearch.addEventListener('submit', onSearchSubmit);\nloadBtn.addEventListener('click', onBtnClick);\n"],"names":["createGalleryCard","imgInfo","axios","fetchPhotos","searchQuery","page","axiosOptions","galleryEl","formElSearch","loadEl","loadBtn","numOfEl","currentPage","searchFromInput","gallery","SimpleLightbox","onSearchSubmit","event","iziToast","response","galleryCardTemplate","imgDetails","error","onBtnClick","cardHeight"],"mappings":"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"}